
### Library

lib_LTLIBRARIES += lib/ecore_win/libecore_win.la

installed_ecorewinmainheadersdir = $(includedir)/ecore-win-@VMAJ@
dist_installed_ecorewinmainheaders_DATA = \
lib/ecore_win/Ecore_Win_Types.h \
lib/ecore_win/Ecore_Win.h

lib_ecore_win_libecore_win_la_SOURCES = \
lib/ecore_win/ecore_win.c \
lib/ecore_win/ecore_win_module.c \
lib/ecore_win/ecore_win_private.h \
lib/ecore_win/ecore_win_wayland.h \
lib/ecore_win/ecore_win_x11.h \
lib/ecore_win/ecore_win_util.c

lib_ecore_win_libecore_win_la_CPPFLAGS = -I$(top_builddir)/src/lib/efl  \
-DPACKAGE_BIN_DIR=\"$(bindir)\" \
-DPACKAGE_LIB_DIR=\"$(libdir)\" \
-DPACKAGE_DATA_DIR=\"$(datadir)/ecore_win\" \
-DPACKAGE_BUILD_DIR=\"$(abs_top_builddir)\" \
@ECORE_WIN_CFLAGS@ \
@ECORE_EVAS_CFLAGS@
lib_ecore_win_libecore_win_la_LIBADD = @ECORE_WIN_LIBS@
lib_ecore_win_libecore_win_la_DEPENDENCIES = @ECORE_WIN_INTERNAL_LIBS@
lib_ecore_win_libecore_win_la_LDFLAGS = @EFL_LTLIBRARY_FLAGS@


if BUILD_ECORE_WIN_X11
XSOURCES = modules/ecore_win/engines/x/ecore_win_x.c
ecorewinenginexpkgdir = $(libdir)/ecore_win/engines/x/$(MODULE_ARCH)
ecorewinenginexpkg_LTLIBRARIES = modules/ecore_win/engines/x/module.la

# Workaround for broken parallel install support in automake (relink issue)
# http://debbugs.gnu.org/cgi/bugreport.cgi?bug=7328
install_ecorewinenginexpkgLTLIBRARIES = install-ecorewinenginexpkgLTLIBRARIES
$(install_ecorewinenginexpkgLTLIBRARIES): install-libLTLIBRARIES

modules_ecore_win_engines_x_module_la_SOURCES = $(XSOURCES)
modules_ecore_win_engines_x_module_la_CPPFLAGS = -I$(top_builddir)/src/lib/efl \
@ECORE_WIN_CFLAGS@ \
@ECORE_X_CFLAGS@ \
modules_ecore_win_engines_x_module_la_LIBADD = \
@USE_ECORE_WIN_LIBS@ \
@USE_ECORE_X_LIBS@
modules_ecore_win_engines_x_module_la_DEPENDENCIES = \
@USE_ECORE_WIN_INTERNAL_LIBS@ \
@USE_ECORE_X_INTERNAL_LIBS@
modules_ecore_win_engines_x_module_la_LDFLAGS = -module @EFL_LTMODULE_FLAGS@
modules_ecore_win_engines_x_module_la_LIBTOOLFLAGS = --tag=disable-static
endif

if BUILD_ECORE_WIN_WAYLAND
WIN_WAYLANDSOURCES = \
modules/ecore_win/engines/wayland/ecore_win_wayland_common.c \
modules/ecore_win/engines/wayland/ecore_win_wayland.c \
modules/ecore_win/engines/wayland/ecore_win_wayland_private.h
ecorewinenginewaylandpkgdir = $(libdir)/ecore_win/engines/wayland/$(MODULE_ARCH)
ecorewinenginewaylandpkg_LTLIBRARIES = modules/ecore_win/engines/wayland/module.la

# Workaround for broken parallel install support in automake (relink issue)
# http://debbugs.gnu.org/cgi/bugreport.cgi?bug=7328
install_ecorewinenginewaylandpkgLTLIBRARIES = install-ecorewinenginewaylandpkgLTLIBRARIES
$(install_ecorewinenginewaylandpkgLTLIBRARIES): install-libLTLIBRARIES

modules_ecore_win_engines_wayland_module_la_SOURCES = $(WIN_WAYLANDSOURCES)
modules_ecore_win_engines_wayland_module_la_CPPFLAGS = -I$(top_builddir)/src/lib/efl \
@ECORE_EVAS_CFLAGS@ \
@ECORE_WAYLAND_CFLAGS@ \
@ECORE_WIN_CFLAGS@
modules_ecore_win_engines_wayland_module_la_LIBADD = \
@USE_ECORE_EVAS_LIBS@ \
@USE_ECORE_WAYLAND_LIBS@ \
@USE_ECORE_WIN_LIBS@
modules_ecore_win_engines_wayland_module_la_DEPENDENCIES = \
@USE_ECORE_EVAS_INTERNAL_LIBS@ \
@USE_ECORE_WAYLAND_INTERNAL_LIBS@ \
@USE_ECORE_WIN_INTERNAL_LIBS@
modules_ecore_win_engines_wayland_module_la_LDFLAGS = -module @EFL_LTMODULE_FLAGS@
modules_ecore_win_engines_wayland_module_la_LIBTOOLFLAGS = --tag=disable-static
endif

